{"remainingRequest":"D:\\Go project\\WebTest\\vue-g6-editor-master\\node_modules\\babel-loader\\lib\\index.js!D:\\Go project\\WebTest\\vue-g6-editor-master\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\Go project\\WebTest\\vue-g6-editor-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Go project\\WebTest\\vue-g6-editor-master\\src\\components\\Toolbar\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Go project\\WebTest\\vue-g6-editor-master\\src\\components\\Toolbar\\index.vue","mtime":1660308703869},{"path":"D:\\Go project\\WebTest\\vue-g6-editor-master\\babel.config.js","mtime":1571212572000},{"path":"D:\\Go project\\WebTest\\vue-g6-editor-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1660287995665},{"path":"D:\\Go project\\WebTest\\vue-g6-editor-master\\node_modules\\babel-loader\\lib\\index.js","mtime":1659582234713},{"path":"D:\\Go project\\WebTest\\vue-g6-editor-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1660287995665},{"path":"D:\\Go project\\WebTest\\vue-g6-editor-master\\node_modules\\vue-loader\\lib\\index.js","mtime":1659706998091}],"contextDependencies":[],"result":["import \"core-js/modules/web.dom.iterable\";\nimport _toConsumableArray from \"D:/Go project/WebTest/vue-g6-editor-master/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport eventBus from \"@/utils/eventBus\";\nimport Util from \"@antv/g6/src/util\";\nimport { uniqueId, getBox } from \"@/utils\";\nexport default {\n  data: function data() {\n    return {\n      page: {},\n      graph: {},\n      redoList: [],\n      undoList: [],\n      editor: null,\n      command: null,\n      selectedItem: null,\n      multiSelect: false,\n      addGroup: false\n    };\n  },\n  created: function created() {\n    this.init();\n    this.bindEvent();\n  },\n  watch: {\n    selectedItem: function selectedItem(val) {\n      if (val && val.length > 1) {\n        this.addGroup = true;\n      } else {\n        this.addGroup = false;\n      }\n    }\n  },\n  methods: {\n    init: function init() {\n      var _this$$parent = this.$parent,\n          editor = _this$$parent.editor,\n          command = _this$$parent.command;\n      this.editor = editor;\n      this.command = command;\n    },\n    bindEvent: function bindEvent() {\n      var _this = this;\n\n      var self = this;\n      eventBus.$on(\"afterAddPage\", function (page) {\n        self.page = page;\n        self.graph = self.page.graph;\n      });\n      eventBus.$on(\"add\", function (data) {\n        _this.redoList = data.redoList;\n        _this.undoList = data.undoList;\n      });\n      eventBus.$on(\"update\", function (data) {\n        _this.redoList = data.redoList;\n        _this.undoList = data.undoList;\n      });\n      eventBus.$on(\"delete\", function (data) {\n        _this.redoList = data.redoList;\n        _this.undoList = data.undoList;\n      });\n      eventBus.$on(\"updateItem\", function (item) {\n        _this.command.executeCommand(\"update\", [item]);\n      });\n      eventBus.$on(\"addItem\", function (item) {\n        _this.command.executeCommand(\"add\", [item]);\n      });\n      eventBus.$on(\"nodeselectchange\", function () {\n        var _this$selectedItem;\n\n        _this.selectedItem = _this.graph.findAllByState(\"node\", \"selected\");\n        _this.selectedItem = (_this$selectedItem = _this.selectedItem).concat.apply(_this$selectedItem, _toConsumableArray(_this.graph.findAllByState(\"edge\", \"selected\")));\n      });\n      eventBus.$on(\"deleteItem\", function () {\n        _this.handleDelete();\n      });\n      eventBus.$on(\"muliteSelectEnd\", function () {\n        _this.multiSelect = false;\n        _this.selectedItem = _this.graph.findAllByState(\"node\", \"selected\");\n      });\n    },\n    handleUndo: function handleUndo() {\n      if (this.undoList.length > 0) this.command.undo();\n    },\n    handleRedo: function handleRedo() {\n      if (this.redoList.length > 0) this.command.redo();\n    },\n    handleDelete: function handleDelete() {\n      if (this.selectedItem.length > 0) {\n        this.command.executeCommand(\"delete\", this.selectedItem);\n        this.selectedItem = null;\n      }\n    },\n    getFormatPadding: function getFormatPadding() {\n      return Util.formatPadding(this.graph.get(\"fitViewPadding\"));\n    },\n    getViewCenter: function getViewCenter() {\n      var padding = this.getFormatPadding();\n      var graph = this.graph;\n      var width = this.graph.get(\"width\");\n      var height = graph.get(\"height\");\n      return {\n        x: (width - padding[2] - padding[3]) / 2 + padding[3],\n        y: (height - padding[0] - padding[2]) / 2 + padding[0]\n      };\n    },\n    handleZoomIn: function handleZoomIn() {\n      var currentZoom = this.graph.getZoom();\n      this.graph.zoomTo(currentZoom + 0.5, this.getViewCenter());\n    },\n    handleZoomOut: function handleZoomOut() {\n      var currentZoom = this.graph.getZoom();\n      this.graph.zoomTo(currentZoom - 0.5, this.getViewCenter());\n    },\n    handleToBack: function handleToBack() {\n      var _this2 = this;\n\n      if (this.selectedItem && this.selectedItem.length > 0) {\n        this.selectedItem.forEach(function (item) {\n          item.toBack();\n\n          _this2.graph.paint();\n        });\n      }\n    },\n    handleToFront: function handleToFront() {\n      var _this3 = this;\n\n      if (this.selectedItem && this.selectedItem.length > 0) {\n        this.selectedItem.forEach(function (item) {\n          if (item.getType() === \"edge\") {// const nodeGroup = this.graph.get(\"nodeGroup\");\n            // const edgeGroup = item.get(\"group\");\n            // nodeGroup.toFront();\n            // edgeGroup.toFront()\n          } else {\n            item.toFront();\n          }\n\n          _this3.graph.paint();\n        });\n      }\n    },\n    handleAutoZoom: function handleAutoZoom() {\n      this.graph.fitView(20);\n    },\n    handleResetZoom: function handleResetZoom() {\n      this.graph.zoomTo(1, this.getViewCenter());\n    },\n    handleMuiltSelect: function handleMuiltSelect() {\n      this.multiSelect = true;\n      this.graph.setMode(\"mulitSelect\");\n    },\n    handleAddGroup: function handleAddGroup() {//TODO 这部分等阿里更新Group之后添加\n      // const model = {\n      //   id: \"group\" + uniqueId(),\n      //   title: \"新建分组\"\n      // };\n      // // this.command.executeCommand(\"add\", \"group\", model);\n      // this.selectedItem.forEach(item => {\n      //   console.log(item);\n      // });\n      //this.getPosition(this.selectedItem);\n    },\n    getPosition: function getPosition(items) {\n      var boxList = [];\n      items.forEach(function (item) {\n        var box = item.getBBox();\n        boxList.push(getBox(box.x, box.y, box.width, box.height));\n      });\n      var minX1, minY1, MaxX2, MaxY2;\n      boxList.forEach(function (box) {\n        if (typeof minX1 == \"undefined\") {\n          minX1 = box.x1;\n        }\n\n        if (typeof minY1 == \"undefined\") {\n          minY1 = box.y1;\n        }\n\n        if (typeof MaxX2 == \"undefined\") {\n          MaxX2 = box.x2;\n        }\n\n        if (typeof MaxY2 == \"undefined\") {\n          MaxY2 = box.y2;\n        }\n\n        if (minX1 > box.x1) {\n          minX1 = box.x1;\n        }\n\n        if (minY1 > box.y1) {\n          minY1 = box.y1;\n        }\n\n        if (MaxX2 < box.x2) {\n          MaxX2 = box.x2;\n        }\n\n        if (MaxY2 < box.y2) {\n          MaxY2 = box.y2;\n        }\n      });\n      var width = MaxX2 - minX1,\n          height = MaxY2 - minY1,\n          x = minX1 + width / 2,\n          y = minY1 + height / 2,\n          id = \"team\" + uniqueId();\n      var model = {\n        id: id,\n        width: width,\n        height: height,\n        x: x,\n        y: y,\n        shape: \"teamNode\"\n      };\n      this.command.executeCommand(\"add\", model); // const item = this.graph.findById(id);\n      // item.get(\"group\").toBack();\n      // const edgeGroup = this.graph.get(\"edgeGroup\");\n      // edgeGroup.toFront();\n      // this.graph.paint();\n    },\n    consoleData: function consoleData() {\n      // this.TestAddGraphFromJson()\n      console.log(this.graph.save());\n    },\n    // 测试加入节点\n    TestAddPoint: function TestAddPoint() {\n      // let data={\n      //  olor:\"#1890ff\",\n      // \tid:\"node2\",\n      // \timage:\"https://gw.alipayobjects.com/zos/rmsportal/czNEJAmyDpclFaSucYWB.svg\",\n      // \tinPoints:[0,0.5],\n      // \tlabel:\"测试节点\"                                                            ,\n      // \tname:\"测试节点\"                                                               ,\n      // \toffsetX:55                                                                     ,\n      // \toffsetY:24                                                                     ,\n      // \toutPoints:[1,0.5]                                                         ,\n      // \tshape:\"customNode\"                                                             ,\n      // \tsize:[170,34]                                                                  ,\n      // \tstateImage:\"/static/img/ok.463ab0e4.svg\"                                       ,\n      // \ttype:\"node\"                                                                    ,\n      // \tx:187                                                                          ,\n      // \ty:121                                                                          ,\n      // };\n      // this.graph.read()\n      this.command.executeCommand(\"add\", [data]);\n    },\n    //测试从保存的图中加入 ok!\n    TestAddGraphFromJson: function TestAddGraphFromJson() {\n      var data = {\n        \"nodes\": [{\n          \"name\": \"测试节点\",\n          \"label\": \"测试节点\",\n          \"size\": [\"170\", \"34\"],\n          \"type\": \"node\",\n          \"x\": 375,\n          \"y\": 38.000579833984375,\n          \"shape\": \"customNode\",\n          \"color\": \"#1890ff\",\n          \"image\": \"https://gw.alipayobjects.com/zos/rmsportal/czNEJAmyDpclFaSucYWB.svg\",\n          \"stateImage\": \"/static/img/ok.463ab0e4.svg\",\n          \"inPoints\": [[0, 0.5]],\n          \"outPoints\": [[1, 0.5]],\n          \"offsetX\": 79,\n          \"offsetY\": 20,\n          \"id\": \"node2\"\n        }, {\n          \"name\": \"测试节点\",\n          \"label\": \"测试节点\",\n          \"size\": [\"170\", \"34\"],\n          \"type\": \"node\",\n          \"x\": 175.2,\n          \"y\": 116.28946872287328,\n          \"shape\": \"customNode\",\n          \"color\": \"#1890ff\",\n          \"image\": \"https://gw.alipayobjects.com/zos/rmsportal/czNEJAmyDpclFaSucYWB.svg\",\n          \"stateImage\": \"/static/img/ok.463ab0e4.svg\",\n          \"inPoints\": [[0, 0.5]],\n          \"outPoints\": [[1, 0.5]],\n          \"offsetX\": 47,\n          \"offsetY\": 18,\n          \"id\": \"node9\"\n        }, {\n          \"name\": \"测试节点\",\n          \"label\": \"测试节点\",\n          \"size\": [\"170\", \"34\"],\n          \"type\": \"node\",\n          \"x\": 528.1777777777777,\n          \"y\": 106.73391316731771,\n          \"shape\": \"customNode\",\n          \"color\": \"#1890ff\",\n          \"image\": \"https://gw.alipayobjects.com/zos/rmsportal/czNEJAmyDpclFaSucYWB.svg\",\n          \"stateImage\": \"/static/img/ok.463ab0e4.svg\",\n          \"inPoints\": [[0, 0.5]],\n          \"outPoints\": [[1, 0.5]],\n          \"offsetX\": 80,\n          \"offsetY\": 26,\n          \"id\": \"node16\"\n        }, {\n          \"name\": \"测试节点\",\n          \"label\": \"测试节点\",\n          \"size\": [\"170\", \"34\"],\n          \"type\": \"node\",\n          \"x\": 788.4444444444446,\n          \"y\": 115.26724650065103,\n          \"shape\": \"customNode\",\n          \"color\": \"#1890ff\",\n          \"image\": \"https://gw.alipayobjects.com/zos/rmsportal/czNEJAmyDpclFaSucYWB.svg\",\n          \"stateImage\": \"/static/img/ok.463ab0e4.svg\",\n          \"inPoints\": [[0, 0.5]],\n          \"outPoints\": [[1, 0.5]],\n          \"offsetX\": 87,\n          \"offsetY\": 23,\n          \"id\": \"node84\"\n        }],\n        \"edges\": [{\n          \"id\": \"edge61\",\n          \"source\": \"node2\",\n          \"target\": \"node9\",\n          \"sourceId\": \"node2\",\n          \"targetId\": \"node9\",\n          \"start\": {\n            \"x\": 0,\n            \"y\": 17\n          },\n          \"end\": {\n            \"x\": 0,\n            \"y\": -17\n          },\n          \"shape\": \"customEdge\",\n          \"type\": \"edge\",\n          \"startPoint\": {\n            \"x\": 330.33848992336084,\n            \"y\": 55.500579833984375\n          },\n          \"endPoint\": {\n            \"x\": 219.86151007663918,\n            \"y\": 98.78946872287328\n          }\n        }, {\n          \"id\": \"edge82\",\n          \"source\": \"node2\",\n          \"target\": \"node16\",\n          \"sourceId\": \"node2\",\n          \"targetId\": \"node16\",\n          \"start\": {\n            \"x\": 0,\n            \"y\": 17\n          },\n          \"end\": {\n            \"x\": 0,\n            \"y\": -17\n          },\n          \"shape\": \"customEdge\",\n          \"type\": \"edge\",\n          \"startPoint\": {\n            \"x\": 414.0001616553508,\n            \"y\": 55.500579833984375\n          },\n          \"endPoint\": {\n            \"x\": 489.1776161224269,\n            \"y\": 89.23391316731771\n          }\n        }, {\n          \"id\": \"edge123\",\n          \"source\": \"node16\",\n          \"target\": \"node84\",\n          \"sourceId\": \"node16\",\n          \"targetId\": \"node84\",\n          \"start\": {\n            \"x\": 0,\n            \"y\": 17\n          },\n          \"end\": {\n            \"x\": 0,\n            \"y\": -17\n          },\n          \"shape\": \"customEdge\",\n          \"type\": \"edge\",\n          \"startPoint\": {\n            \"x\": 613.6777777777777,\n            \"y\": 109.5371918558423\n          },\n          \"endPoint\": {\n            \"x\": 702.9444444444446,\n            \"y\": 112.46396781212644\n          }\n        }],\n        \"groups\": []\n      };\n      this.graph.read(data);\n    }\n  }\n};",null]}